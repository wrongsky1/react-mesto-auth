{"version":3,"sources":["images/login-success.svg","images/login-fail.svg","utils/api.js","utils/auth.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/DeletePopup.js","components/InfoTooltip.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/PageNotFound.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","api","baseUrl","ownId","headers","this","res","ok","json","Promise","reject","status","err","message","fetch","then","_checkResponse","catch","_checkResponseError","name","about","method","body","JSON","stringify","avatar","link","id","authorization","BASE_URL","getInfoLogin","token","data","console","log","Header","children","className","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","key","alt","src","onClick","type","length","Main","cards","onEditAvatar","onEditProfile","onAddPlace","title","map","Footer","PopupWithForm","isOpen","onClose","onSubmit","noValidate","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","e","preventDefault","value","onChange","target","pattern","autoComplete","placeholder","minLength","maxLength","required","EditAvatarPopup","onUpdateAvatar","inputRef","useRef","current","ref","AddPlacePopup","setLink","ImagePopup","DeletePopup","onDelete","InfoTooltip","success","isOpenInfoTool","setIsOpenInfoTool","isForm","registerSuccess","loginFail","Login","handleLogin","emailRef","passwordRef","error","setError","messageError","setMessageError","to","event","email","password","Register","handleRegister","evt","ProtectedRoute","Component","loggedIn","PageNotFound","App","setLoggedIn","infoLoginUser","setInfoLoginUser","setRegisterSuccess","history","useHistory","setCurrentUser","setCards","isPopupProfileOpen","setIsPopupProfileOpen","isPopupAddPlaceOpen","setIsPopupAddPlaceOpen","isPopupAvatarEditOpen","setIsPopupAvatarEditOpen","isPopupCardDeleteOpen","setIsPopupCardDeleteOpen","selectedCard","setSelectedCard","handleError","closeAllPopups","handleEscClose","handleOverlayClose","classList","contains","useEffect","handleCheckToken","all","getUserInfo","getInitialCards","user","initialCards","window","addEventListener","removeEventListener","localStorage","getItem","auth","getInfo","push","path","setItem","Provider","removeItem","btn","document","querySelector","header","toggle","onSetCards","updatedCards","handleResponseCardLike","newCard","newCards","c","deleteLike","setLike","changeAvatar","setUserInfo","setCard","deleteCard","filter","el","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"yHAAAA,EAAOC,QAAU,IAA0B,2C,mBCA3CD,EAAOC,QAAU,IAA0B,wC,qKC8H1BC,EATH,I,WApHV,cAA+C,IAAjCC,EAAgC,EAAhCA,QAASC,EAAuB,EAAvBA,MAAuB,IAAhBC,eAAgB,MAAN,GAAM,sBAC5CC,KAAKH,QAAUA,EACfG,KAAKF,MAAQA,EACbE,KAAKD,QAAUA,E,2DAGFE,GACb,OAAIA,EAAIC,GACCD,EAAIE,OAEJC,QAAQC,OAAR,gDAA0BJ,EAAIK,W,0CAIrBC,GAClB,OAAOH,QAAQC,OAAOE,EAAIC,W,oCAI1B,OAAOC,MAAM,GAAD,OACPT,KAAKH,QADE,aAEV,CACEE,QAASC,KAAKD,UAGjBW,KAAKV,KAAKW,gBACVC,MAAMZ,KAAKa,uB,qCAGgB,IAAhBC,EAAe,EAAfA,KAAMC,EAAS,EAATA,MAClB,OAAON,MAAM,GAAD,OACPT,KAAKH,QADE,aAEV,CACEmB,OAAQ,QACRjB,QAASC,KAAKD,QACdkB,KAAMC,KAAKC,UAAU,CAAEL,OAAMC,YAGhCL,KAAKV,KAAKW,gBACVC,MAAMZ,KAAKa,uB,mCAGDO,GACX,OAAOX,MAAM,GAAD,OACPT,KAAKH,QADE,oBAEV,CACEmB,OAAQ,QACRjB,QAASC,KAAKD,QACdkB,KAAMC,KAAKC,UAAU,CAAEC,aAG1BV,KAAKV,KAAKW,gBACVC,MAAMZ,KAAKa,uB,wCAIZ,OAAOJ,MAAM,GAAD,OACPT,KAAKH,QADE,UAEV,CACEE,QAASC,KAAKD,UAGjBW,KAAKV,KAAKW,gBACVC,MAAMZ,KAAKa,uB,iCAGW,IAAfC,EAAc,EAAdA,KAAMO,EAAQ,EAARA,KACd,OAAOZ,MAAM,GAAD,OACPT,KAAKH,QADE,UAEV,CACEmB,OAAQ,OACRjB,QAASC,KAAKD,QACdkB,KAAMC,KAAKC,UAAU,CAAEL,OAAMO,WAGhCX,KAAKV,KAAKW,gBACVC,MAAMZ,KAAKa,uB,8BAGNS,GACN,OAAOb,MAAM,GAAD,OACPT,KAAKH,QADE,wBACqByB,GAC/B,CACEN,OAAQ,MACRjB,QAASC,KAAKD,UAGjBW,KAAKV,KAAKW,gBACVC,MAAMZ,KAAKa,uB,iCAGHS,GACT,OAAOb,MAAM,GAAD,OACPT,KAAKH,QADE,wBACqByB,GAC/B,CACEN,OAAQ,SACRjB,QAASC,KAAKD,UAGjBW,KAAKV,KAAKW,gBACVC,MAAMZ,KAAKa,uB,iCAGHS,GACT,OAAOb,MAAM,GAAD,OACPT,KAAKH,QADE,kBACeyB,GACzB,CACEN,OAAQ,SACRjB,QAASC,KAAKD,UAGjBW,KAAKV,KAAKW,gBACVC,MAAMZ,KAAKa,yB,KAIJ,CAAQ,CAClBhB,QAAS,8CACTC,MAAO,2BACPC,QAAS,CACPwB,cAAe,uCACd,eAAgB,sBC1HVC,EAAW,gCA8CXC,EAAe,SAACC,GAC3B,OAAOjB,MAAM,GAAD,OAAIe,EAAJ,aAAyB,CACnCR,OAAQ,MACRjB,QAAS,CACP,OAAU,mBACV,eAAgB,mBAChB,cAAgB,UAAhB,OAA2B2B,MAG9BhB,MAAK,SAACT,GACL,OAAOA,EAAIE,UAEZO,MAAK,YACJ,OADkB,EAAXiB,QAGRf,OAAM,SAACL,GACN,OAAOqB,QAAQC,IAAItB,OCnDRuB,MATf,YAA+B,IAAbC,EAAY,EAAZA,SAChB,OACE,4BAAQC,UAAU,UAChB,yBAAKA,UAAU,iBACdD,ICFQE,EAFYC,IAAMC,gBCwClBC,MAvCf,YAAgE,IAAhDC,EAA+C,EAA/CA,KAAMC,EAAyC,EAAzCA,YAAaC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,aACvCC,EAAcP,IAAMQ,WAAWT,GAE/BU,EAAQN,EAAKO,MAAMC,MAAQJ,EAAYI,IACvCC,EAAyB,gCACJH,EAAQ,gCAAkC,gCAG/DI,EAAUV,EAAKW,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEL,MAAQJ,EAAYI,OACrDM,EAAuB,+BACHJ,EAAU,8BAAgC,MAGpE,OACE,yBAAKf,UAAU,UAAUoB,IAAKf,EAAKQ,KACjC,yBACEb,UAAU,mBACVqB,IAAKhB,EAAKvB,KACVwC,IAAKjB,EAAKhB,KACVkC,QAAS,kBAAMjB,EAAYD,MAE7B,uBAAGL,UAAU,wBAAwBK,EAAKvB,MAC1C,yBAAKkB,UAAU,2BACb,4BACEA,UAAWmB,EACXK,KAAK,SACLD,QAAS,kBAAMhB,EAAWF,MAE5B,0BAAML,UAAU,0BAA0BK,EAAKW,MAAMS,SAEvD,4BACEzB,UAAWc,EACXU,KAAK,SACLD,QAAS,kBAAMf,EAAaH,QCerBqB,MA/Cf,YAA0G,IAA1FC,EAAyF,EAAzFA,MAAOC,EAAkF,EAAlFA,aAAcC,EAAoE,EAApEA,cAAeC,EAAqD,EAArDA,WAAYxB,EAAyC,EAAzCA,YAAaC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,aACjFC,EAAcP,IAAMQ,WAAWT,GAErC,OACE,oCACE,6BAASD,UAAU,WACjB,yBACEA,UAAU,kBACVsB,IAAKb,EAAYrB,OACjBiC,IAAG,2DAAcZ,EAAY3B,QAE/B,4BACEkB,UAAU,oBACVwB,KAAK,SACLD,QAASK,EACTG,MAAM,oFAER,wBAAI/B,UAAU,sBAAsBS,EAAY3B,MAChD,4BACEkB,UAAU,uBACVwB,KAAK,SACLD,QAASM,EACTE,MAAM,8HAER,uBAAG/B,UAAU,qBAAqBS,EAAY1B,OAC9C,4BACEiB,UAAU,sBACVwB,KAAK,SACLD,QAASO,EACTC,MAAM,qFAIV,6BAAS/B,UAAU,YAChB2B,EAAMK,KAAI,SAAC3B,GAAD,OACT,kBAAC,EAAD,CACEe,IAAKf,EAAKQ,IACVR,KAAMA,EACNE,WAAYA,EACZC,aAAcA,EACdF,YAAaA,UClCV2B,MARf,WACE,OACE,4BAAQjC,UAAU,UAChB,uBAAGA,UAAU,qBAAb,4BCWSkC,MAdf,YAA8E,IAArDnC,EAAoD,EAApDA,SAAUjB,EAA0C,EAA1CA,KAAMiD,EAAoC,EAApCA,MAAOI,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,QAASC,EAAY,EAAZA,SAC/D,OACE,yBAAKrC,UAAYmC,EAAM,gBAAYrD,EAAZ,iCAA2CA,IAChE,yBAAKkB,UAAU,oBACb,4BAAQA,UAAU,sBAAsBwB,KAAK,SAASD,QAASa,IAC/D,0BAAMpC,UAAU,cAAclB,KAAMA,EAAMuD,SAAUA,EAAUC,YAAU,GACtE,wBAAItC,UAAU,eAAe+B,GAC5BhC,MCqDIwC,MA1Df,YAA8D,IAAlCJ,EAAiC,EAAjCA,OAAQC,EAAyB,EAAzBA,QAASI,EAAgB,EAAhBA,aAAgB,GACvCtC,IAAMQ,WAAWT,GACbC,IAAMuC,SAAS,KAFoB,mBAEpD3D,EAFoD,KAE9C4D,EAF8C,OAGrBxC,IAAMuC,SAAS,IAHM,mBAGpDE,EAHoD,KAGvCC,EAHuC,KAU3D,OACE,kBAAC,EAAD,CACET,OAAQA,EACRC,QAASA,EACTC,SATJ,SAAuBQ,GACrBA,EAAEC,iBACFN,EAAa,CAAE1D,OAAMC,MAAO4D,KAQ1B7D,KAAK,UACLiD,MAAM,6HAEN,2BACEgB,MAAOjE,EACPkE,SAAU,SAACH,GAAD,OAAOH,EAAQG,EAAEI,OAAOF,QAClCG,QAAQ,0DACRC,aAAa,OACbnD,UAAU,iCACVwB,KAAK,OACL4B,YAAY,gEACZ9D,GAAG,eACHR,KAAK,OACLuE,UAAU,IACVC,UAAU,KACVC,UAAQ,IAEV,0BAAMjE,GAAG,qBAAqBU,UAAU,yBAExC,2BACE+C,MAAOJ,EACPK,SAAU,SAACH,GAAD,OAAOD,EAAeC,EAAEI,OAAOF,QACzC/C,UAAU,gCACVwB,KAAK,OACL4B,YAAY,wHACZ9D,GAAG,cACHR,KAAK,MACLuE,UAAU,IACVC,UAAU,MACVC,UAAQ,IAEV,0BAAMjE,GAAG,oBAAoBU,UAAU,yBAEvC,4BACEwB,KAAK,SACLxB,UAAU,sBAFZ,4DCTSwD,MAxCf,YAA+D,IAApCrB,EAAmC,EAAnCA,OAAQC,EAA2B,EAA3BA,QAASqB,EAAkB,EAAlBA,eACpCC,EAAWxD,IAAMyD,SAUvB,OACI,kBAAC,EAAD,CACExB,OAAQA,EACRC,QAASA,EACTC,SAZN,SAAuBQ,GACrBA,EAAEC,iBACFW,EAAe,CACbrE,OAAQsE,EAASE,QAAQb,QAE3BW,EAASE,QAAQb,MAAQ,IAQrBjE,KAAK,eACLiD,MAAM,yFAEN,2BACEzC,GAAG,mBACHU,UAAU,wCACVwB,KAAK,MACL4B,YAAY,qGACZtE,KAAK,OACLyE,UAAQ,EACRM,IAAKH,IAEP,0BAAMpE,GAAG,yBAAyBU,UAAU,yBAE5C,4BACEwB,KAAK,SACLxB,UAAU,sBAFZ,4DC0BO8D,MAxDf,YAAyD,IAAhC3B,EAA+B,EAA/BA,OAAQC,EAAuB,EAAvBA,QAASN,EAAc,EAAdA,WAAc,EAC5B5B,IAAMuC,SAAS,IADa,mBAC7C3D,EAD6C,KACvC4D,EADuC,OAE5BxC,IAAMuC,SAAS,IAFa,mBAE7CpD,EAF6C,KAEvC0E,EAFuC,KAWpD,OACI,kBAAC,EAAD,CACA5B,OAAQA,EACRC,QAASA,EACTC,SAXJ,SAAuBQ,GACnBA,EAAEC,iBACFhB,EAAW,CAAEhD,OAAMO,SACnBqD,EAAQ,IACRqB,EAAQ,KAQRjF,KAAK,YACLiD,MAAM,iEAEF,2BACEzC,GAAG,kBACHyD,MAAOjE,EACPkE,SAAU,SAACH,GAAD,OAAOH,EAAQG,EAAEI,OAAOF,QAClC/C,UAAU,kCACVwB,KAAK,OACL4B,YAAY,mDACZtE,KAAK,QACLuE,UAAU,IACVC,UAAU,KACVC,UAAQ,IAEV,0BAAMjE,GAAG,wBAAwBU,UAAU,yBAE3C,2BACEV,GAAG,iBACHyD,MAAO1D,EACP2D,SAAU,SAACH,GAAD,OAAOkB,EAAQlB,EAAEI,OAAOF,QAClC/C,UAAU,iCACVwB,KAAK,MACL4B,YAAY,qGACZtE,KAAK,OACLyE,UAAQ,IAEV,0BAAMjE,GAAG,uBAAuBU,UAAU,yBAE1C,4BACEA,UAAU,qBACVwB,KAAK,UAFP,4DClCGwC,MAZf,YAAgD,IAA1B3D,EAAyB,EAAzBA,KAAM8B,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,QAClC,OACE,yBAAKpC,UAAYmC,EAAM,4HACrB,yBAAKnC,UAAU,kBACb,yBAAKA,UAAU,sBAAsBsB,IAAKjB,EAAKhB,KAAMgC,IAAKhB,EAAKvB,OAC/D,uBAAGkB,UAAU,uBAAuBK,EAAKvB,MACzC,4BAAQkB,UAAU,+CAA+CwB,KAAK,SAASD,QAASa,OCcjF6B,MAnBf,YAA2D,IAApC5D,EAAmC,EAAnCA,KAAM8B,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,QAAS8B,EAAY,EAAZA,SAC5C,OACE,kBAAC,EAAD,CACE/B,OAAQA,EACRC,QAASA,EACTtD,KAAK,eACLiD,MAAM,4DAEN,4BACEP,KAAK,SACLD,QAAS,kBAAM2C,EAAS7D,IACxBL,UAAU,sBAHZ,kB,yCCYSmE,MAlBf,YAA4C,IAArBC,EAAoB,EAApBA,QAAoB,KAAX5F,QACc0B,IAAMuC,UAAS,IADlB,mBAClC4B,EADkC,KAClBC,EADkB,KAKzC,OACE,kBAAC,EAAD,CACExF,KAAK,WACLyF,QAAQ,EACRpC,OAAQkC,EACRjC,QARgB,WAClBkC,GAAkB,KAShB,yBAAKtE,UAAU,kBAAkBsB,IAAK8C,EAAUI,IAAkBC,IAAWpD,IAAK+C,EAAU,6MAA0C,2PACtI,wBAAIpE,UAAU,mBAAmBoE,EAAU,kKAAkC,yMCiCpEM,MA9Cf,YAAiC,IAAhBC,EAAe,EAAfA,YACTC,EAAW1E,IAAMyD,OAAO,IACxBkB,EAAc3E,IAAMyD,OAAO,IAFH,EAGJzD,IAAMuC,UAAS,GAHX,mBAGvBqC,EAHuB,KAGhBC,EAHgB,OAIU7E,IAAMuC,SAAS,IAJzB,mBAIvBuC,EAJuB,KAITC,EAJS,KAoB9B,OACE,oCACE,kBAAC,EAAD,KACE,kBAAC,IAAD,CAAMC,GAAG,UAAUlF,UAAU,sCAA7B,uEAEF,0BAAMA,UAAU,SACd,6BAASA,UAAU,gBACjB,wBAAIA,UAAU,gBAAd,4BACA,0BAAMqC,SAtBO,SAAC8C,GAGpB,GAFAA,EAAMrC,iBACNiC,GAAS,IACJH,EAAShB,QAAQb,QAAU8B,EAAYjB,QAAQb,MAElD,OADAkC,EAAgB,8JACTF,GAAS,GAElB,IAAMpF,EAAO,CACXyF,MAAOR,EAAShB,QAAQb,MACxBsC,SAAUR,EAAYjB,QAAQb,OAEhC,OAAO4B,EAAYhF,EAAMsF,EAAiBF,IAWN/E,UAAU,eACtC,2BAAO6D,IAAKe,EAAUpD,KAAK,QAAQ4B,YAAY,QAAQpD,UAAU,oCACjE,2BAAO6D,IAAKgB,EAAarD,KAAK,WAAW4B,YAAY,uCAASpD,UAAU,mCACxE,4BAAQwB,KAAK,SAASxB,UAAU,qBAAhC,kCACA,yBAAKA,UAAU,uBACb,uBAAGA,UAAU,gBAAb,oIAEE,kBAAC,IAAD,CAAMkF,GAAG,UAAUlF,UAAU,oCAA7B,2EAKN8E,GAAS,kBAAC,EAAD,CAAaV,SAAS,EAAO5F,QAASwG,OCM1CM,MA9Cf,YAAuC,IAAnBC,EAAkB,EAAlBA,eACZX,EAAW1E,IAAMyD,OAAO,IACxBkB,EAAc3E,IAAMyD,OAAO,IAFG,EAGVzD,IAAMuC,UAAS,GAHL,mBAG7BqC,EAH6B,KAGtBC,EAHsB,OAII7E,IAAMuC,SAAS,IAJnB,mBAI7BuC,EAJ6B,KAIfC,EAJe,KAoBpC,OACE,oCACE,kBAAC,EAAD,KACE,kBAAC,IAAD,CAAMC,GAAG,UAAUlF,UAAU,sCAA7B,mCAEF,0BAAMA,UAAU,SACd,6BAASA,UAAU,gBACjB,wBAAIA,UAAU,gBAAd,sEACA,0BAAMqC,SAtBO,SAACmD,GAGpB,GAFAA,EAAI1C,iBACJiC,GAAS,IACJH,EAAShB,QAAQb,QAAU8B,EAAYjB,QAAQb,MAElD,OADAkC,EAAgB,8JACTF,GAAS,GAElB,IAAMpF,EAAO,CACXyF,MAAOR,EAAShB,QAAQb,MACxBsC,SAAUR,EAAYjB,QAAQb,OAEhC,OAAOwC,EAAe5F,EAAMsF,EAAiBF,IAWT/E,UAAU,eACtC,2BAAO6D,IAAKe,EAAUpD,KAAK,QAAQ1C,KAAK,QAAQsE,YAAY,QAAQpD,UAAU,oCAC9E,2BAAO6D,IAAKgB,EAAarD,KAAK,WAAW1C,KAAK,WAAWsE,YAAY,uCAASpD,UAAU,mCACxF,4BAAQwB,KAAK,SAASxB,UAAU,qBAAhC,gHACA,yBAAKA,UAAU,uBACb,uBAAGA,UAAU,gBAAb,uHAEE,kBAAC,IAAD,CAAMkF,GAAG,UAAUlF,UAAU,oCAA7B,uCAKN8E,GAAS,kBAAC,EAAD,CAAaV,SAAS,EAAO5F,QAASwG,OChC1CS,EAVQ,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,UAAWC,EAAe,EAAfA,SACnC,OACE,kBAAC,IAAD,MAEM,WAAQ,OAAQA,EAAWD,EAAY,kBAAC,IAAD,CAAUR,GAAG,iBCW/CU,MAdf,WACE,OACE,oCACE,kBAAC,EAAD,KACE,kBAAC,IAAD,CAAMV,GAAG,UAAUlF,UAAU,sCAA7B,4DAEF,6BAASA,UAAU,aACjB,uBAAGA,UAAU,oBAAb,OACA,wBAAIA,UAAU,oBAAd,uWC2RO6F,MAlRf,WAAgB,IAAD,EACmB3F,IAAMuC,UAAS,GADlC,mBACNkD,EADM,KACIG,EADJ,OAE6B5F,IAAMuC,SAAS,IAF5C,mBAENsD,EAFM,KAESC,EAFT,OAGiC9F,IAAMuC,UAAS,GAHhD,mBAGN+B,EAHM,KAGWyB,EAHX,KAIPC,EAAUC,cAJH,EAKyBjG,IAAMuC,SAAS,IALxC,mBAKNhC,EALM,KAKO2F,EALP,OAMalG,IAAMuC,SAAS,IAN5B,mBAMNd,EANM,KAMC0E,EAND,OAOuCnG,IAAMuC,UAAS,GAPtD,mBAON6D,EAPM,KAOcC,EAPd,OAQyCrG,IAAMuC,UAAS,GARxD,mBAQN+D,EARM,KAQeC,EARf,OAS6CvG,IAAMuC,UAAS,GAT5D,mBASNiE,EATM,KASiBC,GATjB,QAU6CzG,IAAMuC,SAAS,CAAEpC,KAAM,GAAI8B,QAAQ,IAVhF,qBAUNyE,GAVM,MAUiBC,GAVjB,SAW2B3G,IAAMuC,SAAS,CAAEpC,KAAM,GAAI8B,QAAQ,IAX9D,qBAWN2E,GAXM,MAWQC,GAXR,MAaf,SAASC,GAAalC,GACpBlF,QAAQkF,MAAMA,GA6BhB,SAASmC,KACPV,GAAsB,GACtBE,GAAuB,GACvBE,IAAyB,GACzBE,GAAyB,CAAExG,KAAM,GAAI8B,QAAQ,IAC7C4E,GAAgB,2BAAKD,IAAN,IAAoB3E,QAAQ,KAkE7C,SAAS+E,GAAe1B,GACN,WAAZA,EAAIpE,KACN6F,KAIJ,SAASE,GAAmB3B,GACtBA,EAAIvC,OAAOmE,UAAUC,SAAS,UAChCJ,KAzGJ/G,IAAMoH,WAAU,WACdC,KACAnJ,QAAQoJ,IAAI,CAAC5J,EAAI6J,cAAe7J,EAAI8J,oBACjChJ,MAAK,YAA2B,IAAD,mBAAxBiJ,EAAwB,KAAlBC,EAAkB,KAC9BxB,EAAeuB,GACftB,EAASuB,MAEVhJ,MAAMoI,MACP,IAqGJ9G,IAAMoH,WAAU,WAId,OAHAO,OAAOC,iBAAiB,UAAWZ,IACnCW,OAAOC,iBAAiB,YAAaX,IAE9B,WACLU,OAAOE,oBAAoB,UAAWb,IACtCW,OAAOE,oBAAoB,YAAaZ,QAI5C,IAAMI,GAAmB,WACvB,IAAM7H,EAAQsI,aAAaC,QAAQ,SAC/BvI,GACFwI,EAAkBxI,GAAOhB,MAAK,SAACyJ,GAG7B,OAFArC,GAAY,GACZI,EAAQkC,KAAK,eACNpC,EAAiBmC,OAgD9B,OACE,yBAAKnI,UAAU,OACb,yBAAKA,UAAU,QACf,yBAAKA,UAAU,QACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOqI,KAAK,YACV,kBAAC,EAAD,CAAO1D,YAjDG,SAAChF,EAAMsF,EAAiBF,IjBlJnB,SAAC,GAAyB,IAAvBK,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SACjC,OAAO5G,MAAM,GAAD,OAAKe,EAAL,WAAyB,CACnCR,OAAQ,OACRjB,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBkB,KAAMC,KAAKC,UAAU,CAAEiG,QAAOC,eAE/B3G,MAAK,SAACT,GACL,OAAOA,EAAIE,UAEZO,MAAK,SAACiB,GACL,OAAIA,EAAKD,OACPsI,aAAaM,QAAQ,QAAS3I,EAAKD,OAC5BC,GAEAA,KAEVf,OAAM,SAACL,GACN,OAAOqB,QAAQC,IAAItB,OiB+HrB2J,CAAevI,GAAMjB,MAAK,SAACT,GACzB,OAAKA,EAAIyB,MAIFwI,EAAkBjK,EAAIyB,OAAOhB,MAAK,SAACyJ,GAGxC,OAFArC,GAAY,GACZI,EAAQkC,KAAK,eACNpC,EAAiBmC,OANxBlD,EAAgBhH,EAAIO,SAAWP,EAAI6G,OAC5BC,GAAS,OAOjBnG,OAAM,SAACL,GAER,OADAwG,GAAS,GACFnF,QAAQC,IAAItB,UAsCf,kBAAC,IAAD,CAAO8J,KAAK,YACV,kBAAC,EAAD,CAAU9C,eAnCG,SAAC5F,EAAMsF,EAAiBF,IjBvLvB,SAAC,GAAyB,IAAvBK,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SAChC,OAAO5G,MAAM,GAAD,OAAIe,EAAJ,WAAuB,CACjCR,OAAQ,OACRjB,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBkB,KAAMC,KAAKC,UAAU,CAAEiG,QAAOC,eAE/B3G,MAAK,SAACT,GACL,OAAOA,EAAIE,UAEZO,MAAK,SAACT,GACL,OAAOA,KAERW,OAAM,SAACL,GACN,OAAOqB,QAAQC,IAAItB,OiBwKrB2J,CAAcvI,GAAMjB,MAAK,SAACT,GACxB,OAAIA,EAAI0B,MACNmG,GAAY,GACZI,EAAQkC,KAAK,eACbpC,EAAiB/H,EAAI0B,MACdsG,GAAmB,KAE5BhB,EAAgBhH,EAAI6G,OAAS7G,EAAIO,SAC1BuG,GAAS,WA4BZ,kBAAC,EAAD,CACEsD,KAAK,IACL1C,SAAUA,EACVD,UACE,kBAAC,EAAmB6C,SAApB,CAA6BxF,MAAOtC,GAGhC,kBAAC,EAAD,KACE,yBAAKT,UAAU,gBACb,uBAAGA,UAAU,iBAAiB+F,EAAcX,OAC5C,4BAAQ5D,KAAK,SAASxB,UAAU,mBAAmBuB,QAlCvD,WACdyG,aAAaQ,WAAW,SACxBtC,EAAQkC,KAAK,YACbnC,GAAmB,KA+BD,mCAEF,0BAAMjG,UAAU,cAAcuB,QA9BvB,WACvB,IAAMkH,EAAMC,SAASC,cAAc,gBAC7BC,EAASF,SAASC,cAAc,WACtCF,EAAIrB,UAAUyB,OAAO,sBACrBD,EAAOxB,UAAUyB,OAAO,0BA6BV,kBAAC,EAAD,CACEhH,cA9LlB,WACE0E,GAAsB,IA8LNzE,WA3LlB,WACE2E,GAAuB,IA2LP7E,aAxLlB,WACE+E,IAAyB,IAwLTrG,YArLlB,SAAyBD,GACvB0G,GAAgB,CAAE1G,OAAM8B,QAAQ,KAqLhB2G,WA1KlB,SAAyBC,GACvB1C,EAAS0C,IA0KOxI,WArJlB,SAAyBF,GAEvB,SAAS2I,EAAwBC,GAC/B,IAAMC,EAAWvH,EAAMK,KAAI,SAACmH,GAAD,OAAOA,EAAEtI,MAAQR,EAAKQ,IAAMoI,EAAUE,KACjE9C,EAAS6C,GAHK7I,EAAKW,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEL,MAAQJ,EAAYI,OAWzDjD,EAAIwL,WAAW/I,EAAKQ,KACjBnC,KAAKsK,GACLpK,MAAMoI,IANTpJ,EAAIyL,QAAQhJ,EAAKQ,KACdnC,KAAKsK,GACLpK,MAAMoI,KA4IKxG,aApIlB,SAA8BH,GAC5BwG,GAAyB,CAAExG,OAAM8B,QAAQ,KAoIzBR,MAAOA,IAET,kBAAC,EAAD,MAEA,kBAAC,EAAD,CACEQ,OAAQuE,EACRtE,QAAS6E,GACTxD,eAvKlB,YAA0C,IAAXrE,EAAU,EAAVA,OAC7BxB,EAAI0L,aAAalK,GACdV,MAAK,WACJ0H,EAAe,2BAAK3F,GAAN,IAAmBrB,YACjCuH,IAAyB,MAE1B/H,MAAMoI,OAoKK,kBAAC,EAAD,CACE7E,OAAQmE,EACRlE,QAAS6E,GACTzE,aAtLlB,YAA6C,IAAhB1D,EAAe,EAAfA,KAAMC,EAAS,EAATA,MACjCnB,EAAI2L,YAAY,CAAEzK,OAAMC,UACrBL,MAAK,WACJ0H,EAAe,2BAAK3F,GAAN,IAAmB3B,OAAMC,WACvCwH,GAAsB,MAEvB3H,MAAMoI,OAmLK,kBAAC,EAAD,CACE7E,OAAQqE,EACRpE,QAAS6E,GACTnF,WA1IlB,YAAgD,IAAfhD,EAAc,EAAdA,KAAMO,EAAQ,EAARA,KACrCzB,EAAI4L,QAAQ,CAAE1K,OAAMO,SACjBX,MAAK,SAACuK,GACL5C,EAAS,CAAC4C,GAAF,mBAActH,KACtB8E,GAAuB,MAExB7H,MAAMoI,OAuIK,kBAAC,EAAD,CACE3G,KAAMyG,GAAazG,KACnB8B,OAAQ2E,GAAa3E,OACrBC,QAAS6E,KAGX,kBAAC,EAAD,CACE5G,KAAMuG,GAAsBvG,KAC5B8B,OAAQyE,GAAsBzE,OAC9BC,QAAS6E,GACT/C,SAjKlB,SAA2B7D,GACzBzC,EAAI6L,WAAWpJ,EAAKQ,KACjBnC,MAAK,WACJ,IAAMwK,EAAWvH,EAAM+H,QAAO,SAAAC,GAAE,OAAIA,EAAG9I,MAAQR,EAAKQ,OACpDwF,EAAS6C,GACTrC,GAAyB,CAAExG,KAAM,GAAI8B,QAAQ,OAE9CvD,MAAMoI,OA4JOxC,GAAmB,kBAAC,EAAD,CAAaJ,SAAO,OAKjD,kBAAC,EAAD,MACA,kBAAC,IAAD,CAAOiE,KAAK,KACV,kBAAC,EAAD,YClRUuB,QACW,cAA7B/B,OAAOgC,SAASC,UAEe,UAA7BjC,OAAOgC,SAASC,UAEhBjC,OAAOgC,SAASC,SAASC,MACvB,2DCXNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,KACE,kBAAC,EAAD,QAGJxB,SAASyB,eAAe,SDsHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrB5L,MAAK,SAAA6L,GACJA,EAAaC,gBAEd5L,OAAM,SAAAkG,GACLlF,QAAQkF,MAAMA,EAAMtG,c","file":"static/js/main.0c23ba2c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/login-success.75df9ada.svg\";","module.exports = __webpack_public_path__ + \"static/media/login-fail.db56ee32.svg\";","class Api {\r\n    constructor({ baseUrl, ownId, headers = {} }) {\r\n      this.baseUrl = baseUrl;\r\n      this.ownId = ownId;\r\n      this.headers = headers;\r\n    }\r\n  \r\n    _checkResponse(res){\r\n      if (res.ok) {\r\n        return res.json();\r\n      } else {\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      }\r\n    }\r\n  \r\n    _checkResponseError(err){\r\n      return Promise.reject(err.message);\r\n    }\r\n\r\n    getUserInfo() {\r\n      return fetch(\r\n        `${this.baseUrl}/users/me`,\r\n        {\r\n          headers: this.headers\r\n        }\r\n      )\r\n      .then(this._checkResponse)\r\n      .catch(this._checkResponseError)\r\n    }\r\n  \r\n    setUserInfo({ name, about }) {\r\n      return fetch(\r\n        `${this.baseUrl}/users/me`,\r\n        {\r\n          method: 'PATCH',\r\n          headers: this.headers,\r\n          body: JSON.stringify({ name, about })\r\n        }\r\n      )\r\n      .then(this._checkResponse)\r\n      .catch(this._checkResponseError)\r\n    }\r\n  \r\n    changeAvatar(avatar) {\r\n      return fetch(\r\n        `${this.baseUrl}/users/me/avatar`,\r\n        {\r\n          method: 'PATCH',\r\n          headers: this.headers,\r\n          body: JSON.stringify({ avatar })\r\n        }\r\n      )\r\n      .then(this._checkResponse)\r\n      .catch(this._checkResponseError)\r\n    }\r\n  \r\n    getInitialCards() {\r\n      return fetch(\r\n        `${this.baseUrl}/cards`,\r\n        {\r\n          headers: this.headers\r\n        }\r\n      )\r\n      .then(this._checkResponse)\r\n      .catch(this._checkResponseError)\r\n    }\r\n  \r\n    setCard({ name, link }) {\r\n      return fetch(\r\n        `${this.baseUrl}/cards`,\r\n        {\r\n          method: 'POST',\r\n          headers: this.headers,\r\n          body: JSON.stringify({ name, link })\r\n        }\r\n      )\r\n      .then(this._checkResponse)\r\n      .catch(this._checkResponseError)\r\n    }\r\n  \r\n    setLike(id) {\r\n      return fetch(\r\n        `${this.baseUrl}/cards/likes/${id}`,\r\n        {\r\n          method: 'PUT',\r\n          headers: this.headers\r\n        }\r\n      )\r\n      .then(this._checkResponse)\r\n      .catch(this._checkResponseError)\r\n    }\r\n  \r\n    deleteLike(id) {\r\n      return fetch(\r\n        `${this.baseUrl}/cards/likes/${id}`,\r\n        {\r\n          method: 'DELETE',\r\n          headers: this.headers\r\n        }\r\n      )\r\n      .then(this._checkResponse)\r\n      .catch(this._checkResponseError)\r\n    }\r\n  \r\n    deleteCard(id) {\r\n      return fetch(\r\n        `${this.baseUrl}/cards/${id}`,\r\n        {\r\n          method: 'DELETE',\r\n          headers: this.headers\r\n        }\r\n      )\r\n      .then(this._checkResponse)\r\n      .catch(this._checkResponseError)\r\n    }\r\n  }\r\n\r\n  const api = new Api({\r\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-13',\r\n    ownId: '993c8682f39a3e6b3e598d71',\r\n    headers: {\r\n      authorization: 'c0f1ac49-a1c2-4501-916f-6ad383af4504',\r\n       'Content-Type': 'application/json'\r\n    }\r\n  });\r\n\r\n  export default api;\r\n","export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nexport const register = ({ email, password }) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ email, password })\r\n  })\r\n  .then((res) => {\r\n    return res.json();\r\n  })\r\n  .then((res) => {\r\n    return res\r\n  })\r\n  .catch((err) => {\r\n    return console.log(err)\r\n  })\r\n};\r\n\r\nexport const authorize = ({ email, password }) => {\r\n  return fetch(`${ BASE_URL }/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ email, password })\r\n  })\r\n  .then((res) => {\r\n    return res.json();\r\n  })\r\n  .then((data) => {\r\n    if (data.token) {\r\n      localStorage.setItem('token', data.token);\r\n      return data;\r\n    }\r\n      return data\r\n  })\r\n  .catch((err) => {\r\n    return console.log(err)\r\n  })\r\n};\r\n\r\nexport const getInfoLogin = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`\r\n    }\r\n  })\r\n  .then((res) => {\r\n    return res.json()\r\n  })\r\n  .then(({ data }) => {\r\n    return (data)\r\n  })\r\n  .catch((err) => {\r\n    return console.log(err)\r\n  })\r\n};","import React from 'react';\r\n\r\nfunction Header({ children }) {\r\n  return(\r\n    <header className=\"header\">\r\n      <div className=\"header__logo\"/>\r\n      {children}\r\n    </header> \r\n  );\r\n}\r\n\r\nexport default Header;","import React from \"react\";\r\n\r\nconst CurrentUserContext = React.createContext();\r\n\r\nexport default CurrentUserContext;\r\n\r\n\r\n","import React from 'react';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = (\r\n    `element__close-button ${isOwn ? 'element__close-button_visible' : 'element__close-button_hidden'}`\r\n  );\r\n\r\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n  const cardLikeButtonClassName = (\r\n    `element__like-button ${isLiked ? 'element__like-button_active' : null}`\r\n  );\r\n\r\n  return(\r\n    <div className=\"element\" key={card._id}>\r\n      <img \r\n        className=\"element__picture\"\r\n        alt={card.name} \r\n        src={card.link} \r\n        onClick={() => onCardClick(card)}\r\n      />\r\n      <p className=\"element__description\">{card.name}</p>\r\n      <div className=\"element__like-container\">\r\n        <button \r\n          className={cardLikeButtonClassName} \r\n          type=\"button\" \r\n          onClick={() => onCardLike(card)}\r\n        />\r\n        <span className=\"elements__like-counter\">{card.likes.length}</span>\r\n      </div>\r\n      <button \r\n        className={cardDeleteButtonClassName} \r\n        type=\"button\" \r\n        onClick={() => onCardDelete(card)}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport Card from './Card.js';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({ cards, onEditAvatar, onEditProfile, onAddPlace, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return(\r\n    <>\r\n      <section className=\"profile\">\r\n        <img \r\n          className=\"profile__avatar\" \r\n          src={currentUser.avatar} \r\n          alt={`Аватарка ${currentUser.name}`}\r\n        />\r\n        <button \r\n          className=\"profile__edit-pen\" \r\n          type=\"button\" \r\n          onClick={onEditAvatar} \r\n          title=\"Сменить аватар\"\r\n        />\r\n        <h1 className=\"profile__info-name\">{currentUser.name}</h1>\r\n        <button \r\n          className=\"profile__edit-button\" \r\n          type=\"button\" \r\n          onClick={onEditProfile} \r\n          title=\"Редактировать профиль\"\r\n        />\r\n        <p className=\"profile__info-job\">{currentUser.about}</p>\r\n        <button \r\n          className=\"profile__add-button\" \r\n          type=\"button\" \r\n          onClick={onAddPlace} \r\n          title=\"Добавить место\"\r\n        />\r\n      </section>\r\n\r\n      <section className=\"elements\">\r\n        {cards.map((card) => \r\n          <Card \r\n            key={card._id} \r\n            card={card} \r\n            onCardLike={onCardLike} \r\n            onCardDelete={onCardDelete} \r\n            onCardClick={onCardClick}\r\n          />)}\r\n      </section>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return(\r\n    <footer className=\"footer\">      \r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n    </footer> \r\n  );\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nfunction PopupWithForm({ children, name, title, isOpen, onClose, onSubmit }) {\r\n  return(\r\n    <div className={(isOpen ? `popup ${name} popup_opened` : `popup ${name}`)}>\r\n      <div className=\"popup__container\">\r\n        <button className=\"popup__close-button\" type=\"button\" onClick={onClose}/>\r\n        <form className=\"popup__form\" name={name} onSubmit={onSubmit} noValidate>\r\n          <h2 className=\"popup__head\">{title}</h2>\r\n          {children}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react'\r\nimport PopupWithForm from './PopupWithForm'\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n    \r\n  function handleSubmit (e) {\r\n    e.preventDefault()\r\n    onUpdateUser({ name, about: description })\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      name='profile'\r\n      title='Редактировать профиль'\r\n    >\r\n      <input \r\n        value={name}\r\n        onChange={(e) => setName(e.target.value)}\r\n        pattern=\"^[A-Za-zА-Яа-яЁё\\s\\-]+$\"\r\n        autoComplete=\"none\"\r\n        className=\"popup__input popup__input-name\"\r\n        type=\"text\"\r\n        placeholder=\"Введите имя\"\r\n        id=\"profile-name\"\r\n        name=\"name\"\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        required \r\n      />\r\n      <span id=\"profile-name-error\" className=\"popup__error_visible\"/>\r\n\r\n      <input\r\n        value={description}\r\n        onChange={(e) => setDescription(e.target.value)}\r\n        className=\"popup__input popup__input-job\"\r\n        type=\"text\"\r\n        placeholder=\"Какова твоя профессия?\"\r\n        id=\"profile-job\"\r\n        name=\"job\"\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        required\r\n      />\r\n      <span id=\"profile-job-error\" className=\"popup__error_visible\"/>\r\n            \r\n      <button\r\n        type=\"submit\"\r\n        className=\"popup__save-button\"\r\n      >\r\n      Сохранить\r\n      </button>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n  const inputRef = React.useRef();\r\n    \r\n  function handleSubmit (e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: inputRef.current.value\r\n    });\r\n    inputRef.current.value = ''\r\n  }\r\n\r\n  return (\r\n      <PopupWithForm\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        onSubmit={handleSubmit}\r\n        name='popup-avatar'\r\n        title='Обновить аватар'\r\n      >\r\n        <input\r\n          id=\"avatar-edit-link\"\r\n          className=\"popup__input popup__input-avatar-edit\"\r\n          type=\"url\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          name=\"link\"\r\n          required\r\n          ref={inputRef}\r\n        />\r\n        <span id=\"avatar-edit-link-error\" className=\"popup__error_visible\"/>\r\n            \r\n        <button\r\n          type=\"submit\"\r\n          className=\"popup__save-button\"\r\n        >\r\n        Сохранить\r\n        </button>\r\n      </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\r\n    const [name, setName] = React.useState('');\r\n    const [link, setLink] = React.useState('');\r\n\r\n    function handleSubmit (e) {\r\n        e.preventDefault();\r\n        onAddPlace({ name, link });\r\n        setName('');\r\n        setLink('');\r\n      }\r\n\r\n    return (\r\n        <PopupWithForm\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        onSubmit={handleSubmit}\r\n        name='add-place'\r\n        title='Новое место'\r\n        >\r\n            <input\r\n              id=\"add-place-title\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              className=\"popup__input popup__input-title\"\r\n              type=\"text\"\r\n              placeholder=\"Название\"\r\n              name=\"title\"\r\n              minLength=\"1\"\r\n              maxLength=\"30\"\r\n              required\r\n            />\r\n            <span id=\"add-place-title-error\" className=\"popup__error_visible\"/>\r\n              \r\n            <input\r\n              id=\"add-place-link\"\r\n              value={link}\r\n              onChange={(e) => setLink(e.target.value)}\r\n              className=\"popup__input popup__input-link\"\r\n              type=\"url\"\r\n              placeholder=\"Ссылка на картинку\"\r\n              name=\"link\"\r\n              required\r\n            />\r\n            <span id=\"add-place-link-error\" className=\"popup__error_visible\"/>\r\n\r\n            <button \r\n              className=\"popup__save-button\" \r\n              type=\"submit\" \r\n              \r\n            >\r\n            Сохранить\r\n            </button>\r\n          </PopupWithForm>     \r\n    )\r\n}\r\n\r\nexport default AddPlacePopup\r\n","import React from 'react';\r\n\r\nfunction ImagePopup({ card, isOpen, onClose }) {\r\n  return(\r\n    <div className={(isOpen ? `popup popup_picture-zoom popup_background-color-dark popup_opened` : `popup popup_picture-zoom popup_background-color-dark`)}>\r\n      <div className=\"popup__picture\">\r\n        <img className=\"popup__picture-zoom\" src={card.link} alt={card.name}/>\r\n        <p className=\"popup__picture-text\">{card.name}</p>\r\n        <button className=\"popup__close-button popup_close-picture-zoom\" type=\"button\" onClick={onClose}/>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ImagePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction DeletePopup({ card, isOpen, onClose, onDelete }) {\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      name='popup-delete'\r\n      title='Вы уверены?'\r\n    >  \r\n      <button\r\n        type=\"button\"\r\n        onClick={() => onDelete(card)}\r\n        className=\"popup__save-button\"\r\n      >\r\n      Да\r\n      </button>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default DeletePopup\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport registerSuccess from '../images/login-success.svg';\r\nimport loginFail from '../images/login-fail.svg';\r\n\r\nfunction InfoTooltip({ success, message }) {\r\n  const [isOpenInfoTool, setIsOpenInfoTool] = React.useState(true);\r\n  const handleClose = () => {\r\n    setIsOpenInfoTool(false);\r\n  };\r\n  return (\r\n    <PopupWithForm\r\n      name=\"tool-tip\"\r\n      isForm={false}\r\n      isOpen={isOpenInfoTool}\r\n      onClose={handleClose}\r\n    >\r\n      <img className=\"tool-tip__image\" src={success ? registerSuccess : loginFail} alt={success ? 'Инфо картинка об успешной регистрации' : 'Инфо-картинка о неудачной попытке ввода данных'} />\r\n      <h2 className=\"tool-tip__title\">{success ? 'Вы успешно зарегистировались!' : 'Что-то пошло не так! Попробуйте еще раз.' }</h2>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from './Header';\r\nimport InfoTooltip from './InfoTooltip';\r\n\r\nfunction Login({ handleLogin }) {\r\n  const emailRef = React.useRef('');\r\n  const passwordRef = React.useRef('');\r\n  const [error, setError] = React.useState(false);\r\n  const [messageError, setMessageError] = React.useState('');\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    setError(false);\r\n    if (!emailRef.current.value || !passwordRef.current.value) {\r\n      setMessageError('Пожалуйста, введите email и пароль');\r\n      return setError(true);\r\n    }\r\n    const data = {\r\n      email: emailRef.current.value,\r\n      password: passwordRef.current.value,\r\n    };\r\n    return handleLogin(data, setMessageError, setError);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header>\r\n        <Link to=\"sign-up\" className=\"login__signup login__signup_header\">Регистрация</Link>\r\n      </Header>\r\n      <main className=\"login\">\r\n        <section className=\"login__enter\">\r\n          <h2 className=\"login__title\">Вход</h2>\r\n          <form onSubmit={handleSubmit} className=\"login__form\">\r\n            <input ref={emailRef} type=\"email\" placeholder=\"Email\" className=\"login__input login__input_email\" />\r\n            <input ref={passwordRef} type=\"password\" placeholder=\"Пароль\" className=\"login__input login__input_pswd\" />\r\n            <button type=\"submit\" className=\"login__btn-submit\">Войти</button>\r\n            <div className=\"login__block-signup\">\r\n              <p className=\"login__issue\">\r\n                Еще не зарегистрированы?\r\n                <Link to=\"sign-up\" className=\"login__signup login__signup_form\"> Регистрация</Link>\r\n              </p>\r\n            </div>\r\n          </form>\r\n        </section>\r\n        { error && <InfoTooltip success={false} message={messageError} /> }\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from './Header';\r\nimport InfoTooltip from './InfoTooltip';\r\n\r\nfunction Register({ handleRegister }) {\r\n  const emailRef = React.useRef('');\r\n  const passwordRef = React.useRef('');\r\n  const [error, setError] = React.useState(false);\r\n  const [messageError, setMessageError] = React.useState('');\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setError(false);\r\n    if (!emailRef.current.value || !passwordRef.current.value) {\r\n      setMessageError('Пожалуйста, введите email и пароль');\r\n      return setError(true);\r\n    }\r\n    const data = {\r\n      email: emailRef.current.value,\r\n      password: passwordRef.current.value,\r\n    };\r\n    return handleRegister(data, setMessageError, setError);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header>\r\n        <Link to=\"sign-in\" className=\"login__signup login__signup_header\">Войти</Link>\r\n      </Header>\r\n      <main className=\"login\">\r\n        <section className=\"login__enter\">\r\n          <h2 className=\"login__title\">Регистрация</h2>\r\n          <form onSubmit={handleSubmit} className=\"login__form\">\r\n            <input ref={emailRef} type=\"email\" name=\"email\" placeholder=\"Email\" className=\"login__input login__input_email\" />\r\n            <input ref={passwordRef} type=\"password\" name=\"password\" placeholder=\"Пароль\" className=\"login__input login__input_pswd\" />\r\n            <button type=\"submit\" className=\"login__btn-submit\">Зарегистрироваться</button>\r\n            <div className=\"login__block-signup\">\r\n              <p className=\"login__issue\">\r\n                Уже зарегистрированы?\r\n                <Link to=\"sign-in\" className=\"login__signup login__signup_form\"> Войти</Link>\r\n              </p>\r\n            </div>\r\n          </form>\r\n        </section>\r\n        { error && <InfoTooltip success={false} message={messageError} /> }\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ Component, loggedIn }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n          () => { return (loggedIn ? Component : <Redirect to=\"/sign-in\" />); }\r\n      }\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from './Header';\r\n\r\nfunction PageNotFound() {\r\n  return (\r\n    <>\r\n      <Header>\r\n        <Link to=\"sign-in\" className=\"login__signup login__signup_header\">На главную</Link>\r\n      </Header>\r\n      <section className=\"not-found\">\r\n        <p className=\"not-found__error\">404</p>\r\n        <h2 className=\"not-found__title\">Неправильно набран адрес или такой страницы на сайте не существует.</h2>\r\n      </section>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PageNotFound;","import React from 'react';\r\nimport { Switch, Route, useHistory } from 'react-router-dom';\r\nimport api from '../utils/api'\r\nimport * as auth from '../utils/auth';\r\nimport '../index.css';\r\nimport Header from './Header.js';\r\nimport Main from './Main.js';\r\nimport Footer from './Footer.js';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup'\r\nimport ImagePopup from './ImagePopup.js';\r\nimport DeletePopup from './DeletePopup';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport PageNotFound from './PageNotFound';\r\n\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction App() {\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [infoLoginUser, setInfoLoginUser] = React.useState('');\r\n  const [registerSuccess, setRegisterSuccess] = React.useState(false);\r\n  const history = useHistory();\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [isPopupProfileOpen, setIsPopupProfileOpen] = React.useState(false);\r\n  const [isPopupAddPlaceOpen, setIsPopupAddPlaceOpen] = React.useState(false);\r\n  const [isPopupAvatarEditOpen, setIsPopupAvatarEditOpen] = React.useState(false);\r\n  const [isPopupCardDeleteOpen, setIsPopupCardDeleteOpen] = React.useState({ card: {}, isOpen: false });\r\n  const [selectedCard, setSelectedCard] = React.useState({ card: {}, isOpen: false });\r\n\r\nfunction handleError (error) {\r\n  console.error(error);\r\n}\r\n\r\nReact.useEffect(() => {\r\n  handleCheckToken();\r\n  Promise.all([api.getUserInfo(), api.getInitialCards()])\r\n    .then(([user, initialCards]) => {\r\n      setCurrentUser(user)\r\n      setCards(initialCards)\r\n    })\r\n    .catch(handleError)\r\n  },[]);\r\n\r\nfunction handleEditProfileClick() {\r\n  setIsPopupProfileOpen(true);\r\n}\r\n\r\nfunction handleAddPlaceClick() {\r\n  setIsPopupAddPlaceOpen(true);\r\n}\r\n\r\nfunction handleEditAvatarClick() {\r\n  setIsPopupAvatarEditOpen(true);\r\n}\r\n\r\nfunction handleCardClick(card) {\r\n  setSelectedCard({ card, isOpen: true });\r\n}\r\n\r\nfunction closeAllPopups() {\r\n  setIsPopupProfileOpen(false);\r\n  setIsPopupAddPlaceOpen(false);\r\n  setIsPopupAvatarEditOpen(false);\r\n  setIsPopupCardDeleteOpen({ card: {}, isOpen: false });\r\n  setSelectedCard({ ...selectedCard, isOpen: false })\r\n}\r\n\r\nfunction handleSetCards (updatedCards) {\r\n  setCards(updatedCards);\r\n}\r\n\r\nfunction handleUpdateUser ({ name, about }) {\r\n  api.setUserInfo({ name, about })\r\n    .then(() => {\r\n      setCurrentUser({ ...currentUser, name, about });\r\n      setIsPopupProfileOpen(false);\r\n    })\r\n    .catch(handleError)\r\n}\r\n\r\nfunction handleUpdateAvatar ({ avatar }) {\r\n  api.changeAvatar(avatar)\r\n    .then(() => {\r\n      setCurrentUser({ ...currentUser, avatar });\r\n      setIsPopupAvatarEditOpen(false);\r\n    })\r\n    .catch(handleError)\r\n}\r\n\r\nfunction handleCardLike (card) {\r\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n  function handleResponseCardLike (newCard) {\r\n    const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n    setCards(newCards);\r\n  }\r\n\r\n  if (!isLiked) {\r\n    api.setLike(card._id)\r\n      .then(handleResponseCardLike)\r\n      .catch(handleError)\r\n  } else {\r\n    api.deleteLike(card._id)\r\n      .then(handleResponseCardLike)\r\n      .catch(handleError)\r\n  }\r\n}\r\n\r\nfunction handleRequestDelete (card) {\r\n  setIsPopupCardDeleteOpen({ card, isOpen: true })\r\n}\r\n\r\nfunction handleCardDelete (card) {\r\n  api.deleteCard(card._id)\r\n    .then(() => {\r\n      const newCards = cards.filter(el => el._id !== card._id);\r\n      setCards(newCards);\r\n      setIsPopupCardDeleteOpen({ card: {}, isOpen: false });\r\n    })\r\n    .catch(handleError)\r\n}\r\n\r\nfunction handleAddPlaceSubmit ({ name, link }) { \r\n  api.setCard({ name, link })\r\n    .then((newCard) => {\r\n      setCards([newCard, ...cards]);\r\n      setIsPopupAddPlaceOpen(false);\r\n    })\r\n    .catch(handleError)\r\n}\r\n\r\nfunction handleEscClose(evt) {\r\n  if (evt.key === 'Escape') {\r\n    closeAllPopups();\r\n  }\r\n}\r\n\r\nfunction handleOverlayClose(evt) {\r\n  if (evt.target.classList.contains('popup')) {\r\n    closeAllPopups();\r\n  }\r\n}\r\n\r\nReact.useEffect(() => {\r\n  window.addEventListener('keydown', handleEscClose);\r\n  window.addEventListener('mousedown', handleOverlayClose);\r\n\r\n  return () => {\r\n    window.removeEventListener('keydown', handleEscClose);\r\n    window.removeEventListener('mousedown', handleOverlayClose);\r\n  };\r\n})\r\n\r\nconst handleCheckToken = () => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    auth.getInfoLogin(token).then((getInfo) => {\r\n      setLoggedIn(true);\r\n      history.push('/my-profile');\r\n      return setInfoLoginUser(getInfo);\r\n    });\r\n  }\r\n};\r\n\r\nconst handleLogin = (data, setMessageError, setError) => {\r\n  auth.authorize(data).then((res) => {\r\n    if (!res.token) {\r\n      setMessageError(res.message || res.error);\r\n      return setError(true);\r\n    }\r\n    return auth.getInfoLogin(res.token).then((getInfo) => {\r\n      setLoggedIn(true);\r\n      history.push('/my-profile');\r\n      return setInfoLoginUser(getInfo);\r\n    });\r\n  }).catch((err) => {\r\n    setError(true);\r\n    return console.log(err);\r\n  });\r\n};\r\n\r\nconst handleRegister = (data, setMessageError, setError) => {\r\n  auth.register(data).then((res) => {\r\n    if (res.data) {\r\n      setLoggedIn(true);\r\n      history.push('/my-profile');\r\n      setInfoLoginUser(res.data);\r\n      return setRegisterSuccess(true);\r\n    }\r\n    setMessageError(res.error || res.message);\r\n    return setError(true);\r\n  });\r\n};\r\n\r\nconst signOut = () => {\r\n  localStorage.removeItem('token');\r\n  history.push('/sign-in');\r\n  setRegisterSuccess(false);\r\n};\r\n\r\nconst toggleBurgerMenu = () => {\r\n  const btn = document.querySelector('.burger-menu');\r\n  const header = document.querySelector('.header');\r\n  btn.classList.toggle('burger-menu_active');\r\n  header.classList.toggle('header_burger-menu');\r\n};\r\n\r\nreturn (\r\n  <div className=\"App\">\r\n    <div className=\"body\">\r\n    <div className=\"page\">\r\n      <Switch>\r\n        <Route path=\"/sign-in\">\r\n          <Login handleLogin={handleLogin} />\r\n        </Route>\r\n        <Route path=\"/sign-up\">\r\n          <Register handleRegister={handleRegister} />\r\n        </Route>\r\n        <ProtectedRoute\r\n          path=\"/\"\r\n          loggedIn={loggedIn}\r\n          Component={(\r\n            <CurrentUserContext.Provider value={currentUser}>\r\n              \r\n                \r\n                <Header>\r\n                  <div className=\"header__info\">\r\n                    <p className=\"header__email\">{infoLoginUser.email}</p>\r\n                    <button type=\"button\" className=\"header__sign-out\" onClick={signOut}>Выйти</button>\r\n                  </div>\r\n                  <span className=\"burger-menu\" onClick={toggleBurgerMenu} />\r\n                </Header>\r\n\r\n                <Main\r\n                  onEditProfile={handleEditProfileClick} \r\n                  onAddPlace={handleAddPlaceClick}\r\n                  onEditAvatar={handleEditAvatarClick}\r\n                  onCardClick={handleCardClick}\r\n                  onSetCards={handleSetCards}\r\n                  onCardLike={handleCardLike}\r\n                  onCardDelete={handleRequestDelete}\r\n                  cards={cards}\r\n                />\r\n                <Footer />\r\n\r\n                <EditAvatarPopup\r\n                  isOpen={isPopupAvatarEditOpen}\r\n                  onClose={closeAllPopups}\r\n                  onUpdateAvatar={handleUpdateAvatar}\r\n                />\r\n\r\n                <EditProfilePopup\r\n                  isOpen={isPopupProfileOpen}\r\n                  onClose={closeAllPopups}\r\n                  onUpdateUser={handleUpdateUser}\r\n                />\r\n\r\n                <AddPlacePopup\r\n                  isOpen={isPopupAddPlaceOpen}\r\n                  onClose={closeAllPopups}\r\n                  onAddPlace={handleAddPlaceSubmit}\r\n                />\r\n\r\n                <ImagePopup\r\n                  card={selectedCard.card}\r\n                  isOpen={selectedCard.isOpen}\r\n                  onClose={closeAllPopups}\r\n                />\r\n\r\n                <DeletePopup\r\n                  card={isPopupCardDeleteOpen.card}\r\n                  isOpen={isPopupCardDeleteOpen.isOpen}\r\n                  onClose={closeAllPopups}\r\n                  onDelete={handleCardDelete}\r\n                />\r\n                { registerSuccess && <InfoTooltip success /> }\r\n              \r\n            </CurrentUserContext.Provider>\r\n          )}\r\n        />\r\n        <Footer />\r\n        <Route path=\"*\">\r\n          <PageNotFound />\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  </div>  \r\n  </div>\r\n);\r\n}          \r\n\r\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}